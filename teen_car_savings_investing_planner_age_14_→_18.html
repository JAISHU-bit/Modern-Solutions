<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teen Car Savings & Investing Planner (14→18)</title>
  <style>
    :root{
      --bg:#0b1220; --card:#111a2b; --muted:#91a2c7; --text:#eaf1ff; --accent:#6ea8fe; --accent2:#7ee7c4; --warn:#ffd166;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial; background:linear-gradient(180deg,#0a1020,#09101d 30%,#0b1220); color:var(--text)}
    .container{max-width:1100px;margin:24px auto;padding:16px}
    h1{font-size:28px;margin:0 0 12px 0}
    .sub{color:var(--muted);margin-bottom:18px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:16px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,0.06);border-radius:16px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,0.25)}
    .card h2{font-size:18px;margin:0 0 10px}
    label{display:block;font-size:12px;color:var(--muted);margin-top:10px}
    input,select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:#0c1628;color:var(--text)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .numbers{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .kpi{background:#0c1628;border:1px solid rgba(255,255,255,0.06);border-radius:14px;padding:12px}
    .kpi .label{font-size:12px;color:var(--muted)}
    .kpi .value{font-size:22px;font-weight:700;margin-top:4px}
    .actions{display:flex;gap:10px;margin-top:10px}
    button{cursor:pointer;border:none;border-radius:12px;padding:10px 14px;font-weight:600}
    .primary{background:var(--accent);color:#071022}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.15);color:var(--text)}
    .note{font-size:12px;color:var(--muted);margin-top:8px}
    .footer{opacity:.8;font-size:12px;margin-top:14px;color:var(--muted)}
    canvas{width:100%;height:260px;background:#0b1426;border-radius:12px;border:1px solid rgba(255,255,255,0.06)}
    table{width:100%;border-collapse:collapse;font-size:12px}
    th,td{padding:8px;border-bottom:1px dashed rgba(255,255,255,0.08)}
    th{color:var(--muted);text-align:left}
    .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(110,168,254,.15);color:var(--accent);font-weight:600;font-size:11px;margin-left:6px}
    .warn{background:rgba(255,209,102,.12);color:var(--warn)}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <h1>Teen Car Savings & Investing Planner <span class="pill">Age 14 → 18</span></h1>
    <div class="sub">Plan a safe <strong>Car Fund</strong> and an invested <strong>Future Fund</strong> side‑by‑side. Tune work hours, savings rates, and returns to see how much you could have by 18.</div>

    <div class="grid">
      <!-- Controls -->
      <section class="card" aria-label="Inputs">
        <h2>Inputs</h2>
        <div class="row">
          <div>
            <label>Current age</label>
            <input id="ageNow" type="number" min="10" max="17" value="14">
          </div>
          <div>
            <label>Goal age</label>
            <input id="ageGoal" type="number" min="16" max="20" value="18">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Starting amount ($)</label>
            <input id="startAmount" type="number" min="0" step="1" value="70">
          </div>
          <div>
            <label>Monthly save now ($) <span class="note">(before job)</span></label>
            <input id="monthlyNow" type="number" min="0" step="1" value="10">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Job start age</label>
            <input id="jobStartAge" type="number" min="14" max="18" value="16">
          </div>
          <div>
            <label>Hourly wage ($/hr)</label>
            <input id="wage" type="number" min="0" step="0.25" value="15">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Hours per week</label>
            <input id="hoursWeek" type="number" min="0" step="1" value="10">
          </div>
          <div>
            <label>Save rate from job (%)</label>
            <input id="saveRate" type="number" min="0" max="100" step="1" value="50">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Split to Car Fund (%)</label>
            <input id="carSplit" type="number" min="0" max="100" step="1" value="70">
          </div>
          <div>
            <label>Split to Future Fund (%)</label>
            <input id="futureSplit" type="number" min="0" max="100" step="1" value="30" disabled>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Car Fund APY (%/yr)</label>
            <input id="carAPY" type="number" min="0" step="0.1" value="4.5">
          </div>
          <div>
            <label>Future Fund return (%/yr)</label>
            <input id="futureAPY" type="number" min="0" step="0.1" value="7">
          </div>
        </div>
        <div class="actions">
          <button class="primary" id="runBtn">Run plan</button>
          <button class="ghost" id="resetBtn">Reset</button>
        </div>
        <div class="note">Assumes steady hours year‑round. Monthly job income uses <em>hours/week × 4.33</em>. Compounding is monthly.</div>
      </section>

      <!-- Results / KPIs -->
      <section class="card" aria-label="Key results">
        <h2>By your goal age</h2>
        <div class="numbers">
          <div class="kpi">
            <div class="label">Car Fund (safe)</div>
            <div class="value" id="kpiCar">$0</div>
          </div>
          <div class="kpi">
            <div class="label">Future Fund (invested)</div>
            <div class="value" id="kpiFuture">$0</div>
          </div>
          <div class="kpi">
            <div class="label">Total</div>
            <div class="value" id="kpiTotal">$0</div>
          </div>
        </div>
        <div class="numbers" style="margin-top:10px">
          <div class="kpi">
            <div class="label">Total contributions</div>
            <div class="value" id="kpiContrib">$0</div>
          </div>
          <div class="kpi">
            <div class="label">Growth (interest/returns)</div>
            <div class="value" id="kpiGrowth">$0</div>
          </div>
          <div class="kpi">
            <div class="label">% from growth</div>
            <div class="value" id="kpiGrowthPct">0%</div>
          </div>
        </div>
        <div class="note warn" id="riskNote" style="display:none;margin-top:10px;padding:8px;border-radius:10px">Reminder: invested money can go up or down. For a car you need soon, keep most in the Car Fund.</div>
      </section>
    </div>

    <div class="card" style="margin-top:16px">
      <h2>Balance over time</h2>
      <canvas id="chart" width="1000" height="260" aria-label="Balance chart"></canvas>
      <div class="note">Line = Total; areas show Car vs Future fund balances.</div>
    </div>

    <div class="card" style="margin-top:16px">
      <h2>Month‑by‑Month Detail</h2>
      <div class="note">Download as CSV for applications or planning.</div>
      <div style="overflow:auto; max-height:320px; border:1px solid rgba(255,255,255,0.06); border-radius:12px;">
        <table id="table"><thead></thead><tbody></tbody></table>
      </div>
      <div class="actions">
        <button class="ghost" id="downloadBtn">Download CSV</button>
      </div>
    </div>

    <div class="footer">Made for learning. Returns are estimates, not guarantees. Consider keeping short‑term car money safe in a HYSA or CD.</div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function currency(n){return n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0})}

    function run(){
      const ageNow = +$("ageNow").value;
      const ageGoal = +$("ageGoal").value;
      const months = Math.max(0,Math.round((ageGoal - ageNow)*12));
      const startAmount = +$("startAmount").value;
      const monthlyNow = +$("monthlyNow").value;
      const jobStartAge = +$("jobStartAge").value;
      const wage = +$("wage").value;
      const hoursWeek = +$("hoursWeek").value;
      const saveRate = +$("saveRate").value/100;
      const carSplit = +$("carSplit").value/100;
      const futureSplit = 1 - carSplit;
      $("futureSplit").value = Math.round(futureSplit*100);
      const carAPY = +$("carAPY").value/100;
      const futureAPY = +$("futureAPY").value/100;

      const rCar = carAPY/12; // monthly
      const rFuture = futureAPY/12;

      let carBal = 0, futureBal = 0;
      let totalContrib = 0;
      const rows = [];

      // seed starting amount goes to Car Fund first by default (safe)
      carBal += startAmount; totalContrib += startAmount;

      for(let m=0;m<months;m++){
        const age = ageNow + m/12;
        const monthLabel = new Date(2000, m); // dummy base year
        // contributions before job: monthlyNow
        let contribNow = monthlyNow;
        // job income if reached jobStartAge
        let jobIncome = 0;
        if(age >= jobStartAge){
          jobIncome = wage * hoursWeek * 4.33; // monthly gross
        }
        const jobSaved = jobIncome * saveRate;
        const monthContrib = contribNow + jobSaved;

        // split contributions
        const toCar = monthContrib * carSplit;
        const toFuture = monthContrib * futureSplit;

        carBal = carBal*(1+rCar) + toCar;
        futureBal = futureBal*(1+rFuture) + toFuture;

        totalContrib += monthContrib;

        rows.push({
          month:m+1,
          contrib_now: contribNow,
          job_income: jobIncome,
          saved_from_job: jobSaved,
          to_car: toCar,
          to_future: toFuture,
          car_balance: carBal,
          future_balance: futureBal,
          total_balance: carBal+futureBal
        });
      }

      const total = carBal + futureBal;
      const growth = Math.max(0, total - totalContrib);
      const growthPct = total > 0 ? (growth/total*100) : 0;

      $("kpiCar").textContent = currency(carBal);
      $("kpiFuture").textContent = currency(futureBal);
      $("kpiTotal").textContent = currency(total);
      $("kpiContrib").textContent = currency(totalContrib);
      $("kpiGrowth").textContent = currency(growth);
      $("kpiGrowthPct").textContent = growthPct.toFixed(1)+"%";

      $("riskNote").style.display = futureAPY>0 && futureSplit>0 ? 'block':'none';

      drawChart(rows);
      fillTable(rows);

      // CSV download handler uses latest rows
      window.__rows = rows;
    }

    function drawChart(rows){
      const c = $("chart");
      const ctx = c.getContext('2d');
      ctx.clearRect(0,0,c.width,c.height);

      // padding
      const P = {l:44,r:12,t:14,b:28};
      const W = c.width - P.l - P.r;
      const H = c.height - P.t - P.b;

      // scales
      const xs = (i)=> P.l + (i/(Math.max(1,rows.length-1)))*W;
      const maxY = Math.max(1000, ...rows.map(r=>r.total_balance));
      const ys = (v)=> P.t + H - (v/maxY)*H;

      // grid
      ctx.strokeStyle = 'rgba(255,255,255,0.08)';
      ctx.lineWidth = 1;
      ctx.setLineDash([4,6]);
      for(let g=0; g<=5; g++){
        const y = P.t + (H/5)*g;
        ctx.beginPath(); ctx.moveTo(P.l,y); ctx.lineTo(P.l+W,y); ctx.stroke();
        const val = Math.round((1 - g/5)*maxY);
        ctx.fillStyle = 'rgba(255,255,255,0.5)';
        ctx.font = '12px system-ui, -apple-system, Segoe UI';
        ctx.fillText(currency(val), 6, y+4);
      }
      ctx.setLineDash([]);

      // Areas (Car and Future)
      function drawArea(vals, color){
        ctx.beginPath();
        ctx.moveTo(P.l, ys(0));
        vals.forEach((v,i)=> ctx.lineTo(xs(i), ys(v)) );
        ctx.lineTo(P.l+W, ys(0));
        ctx.closePath();
        ctx.fillStyle = color; ctx.fill();
      }
      const carVals = rows.map(r=>r.car_balance);
      const futureVals = rows.map(r=>r.car_balance + r.future_balance);
      drawArea(carVals, 'rgba(110,168,254,0.20)');
      drawArea(futureVals, 'rgba(126,231,196,0.18)');

      // Total line
      ctx.beginPath();
      rows.forEach((r,i)=>{ const x=xs(i), y=ys(r.total_balance); if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y); });
      ctx.strokeStyle = '#6ea8fe'; ctx.lineWidth = 2; ctx.stroke();

      // Legend
      ctx.fillStyle = 'rgba(255,255,255,0.8)';
      ctx.font = '12px system-ui, -apple-system, Segoe UI';
      ctx.fillText('Car Fund', P.l+8, P.t+16);
      ctx.fillText('Future Fund', P.l+88, P.t+16);
      ctx.fillText('Total', P.l+192, P.t+16);
      // Legend markers
      ctx.fillStyle = 'rgba(110,168,254,0.6)'; ctx.fillRect(P.l-2, P.t+6, 10,10);
      ctx.fillStyle = 'rgba(126,231,196,0.6)'; ctx.fillRect(P.l+78, P.t+6, 10,10);
      ctx.fillStyle = '#6ea8fe'; ctx.fillRect(P.l+170, P.t+6, 10,10);
    }

    function fillTable(rows){
      const thead = $("table").querySelector('thead');
      const tbody = $("table").querySelector('tbody');
      thead.innerHTML = `<tr>
        <th>#</th>
        <th>Saved from job</th>
        <th>To Car</th>
        <th>To Future</th>
        <th>Car balance</th>
        <th>Future balance</th>
        <th>Total</th>
      </tr>`;
      tbody.innerHTML = rows.map(r=>`<tr>
        <td>${r.month}</td>
        <td>${currency(r.saved_from_job)}</td>
        <td>${currency(r.to_car)}</td>
        <td>${currency(r.to_future)}</td>
        <td>${currency(r.car_balance)}</td>
        <td>${currency(r.future_balance)}</td>
        <td>${currency(r.total_balance)}</td>
      </tr>`).join('');
    }

    function downloadCSV(){
      const rows = window.__rows || [];
      const header = ['month','saved_from_job','to_car','to_future','car_balance','future_balance','total_balance'];
      const csv = [header.join(',')].concat(rows.map(r=>[
        r.month,
        r.saved_from_job.toFixed(2),
        r.to_car.toFixed(2),
        r.to_future.toFixed(2),
        r.car_balance.toFixed(2),
        r.future_balance.toFixed(2),
        r.total_balance.toFixed(2)
      ].join(','))).join('\n');
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'teen_car_plan.csv'; a.click();
      URL.revokeObjectURL(url);
    }

    // Events
    $("runBtn").addEventListener('click', run);
    $("resetBtn").addEventListener('click', ()=>{
      $("ageNow").value = 14; $("ageGoal").value = 18; $("startAmount").value = 70; $("monthlyNow").value = 10;
      $("jobStartAge").value = 16; $("wage").value = 15; $("hoursWeek").value = 10; $("saveRate").value = 50;
      $("carSplit").value = 70; $("futureSplit").value = 30; $("carAPY").value = 4.5; $("futureAPY").value = 7;
      run();
    });
    $("carSplit").addEventListener('input', ()=>{ $("futureSplit").value = 100 - (+$("carSplit").value||0);});
    $("downloadBtn").addEventListener('click', downloadCSV);

    // initial run
    run();
  </script>
</body>
</html>
